#!/bin/bash
# Auto-commit claude history before pushing dotfiles

cd ~/.dotfiles

# Check if history.jsonl has uncommitted changes
if ! git diff --quiet .claude/history.jsonl 2>/dev/null; then
  echo "Auto-committing claude history..."
  git add .claude/history.jsonl
  git commit -m "auto: update claude history"
fi

# Also check for settings.json changes
if ! git diff --quiet .claude/settings.json 2>/dev/null; then
  echo "Auto-committing claude settings..."
  git add .claude/settings.json
  git commit -m "auto: update claude settings"
fi

exit 0
