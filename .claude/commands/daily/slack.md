---
name: slack
description: Generate and optionally post a daily summary to Slack
argument-hint: [channel?]
allowed-tools: mcp__linear__*, mcp__github__*, Bash, Read
---

# Daily Slack Summary

Generate a Slack-formatted daily summary and optionally post it via webhook.

## Workflow

1. **Fetch All Data** (parallel)
   - Linear tasks: `mcp__linear__list_issues` with `assignee: "me"`, `updatedAt: "-P1D"`
   - GitHub PRs: `mcp__github__search_pull_requests` with `query: "author:@me"`
   - GitHub commits: Today's commit activity

2. **Format for Slack**
   - Use Slack mrkdwn formatting
   - Include emoji for visual clarity
   - Keep concise for channel readability

3. **Output or Post**
   - If webhook URL available: offer to post directly
   - Otherwise: output formatted message for manual posting

## Slack Message Format

```json
{
  "blocks": [
    {
      "type": "header",
      "text": {
        "type": "plain_text",
        "text": "üìä Daily Summary - {date}"
      }
    },
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "*üéØ Linear Tasks*\n‚Ä¢ `TICKET-123` Task in progress\n‚Ä¢ `TICKET-456` Completed ‚úì"
      }
    },
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "*üíª GitHub*\n‚Ä¢ PR #42 open - _Ready for review_\n‚Ä¢ PR #40 merged ‚úì\n‚Ä¢ 8 commits today"
      }
    },
    {
      "type": "context",
      "elements": [
        {
          "type": "mrkdwn",
          "text": "Generated by Claude Code"
        }
      ]
    }
  ]
}
```

## Simple Text Format (Fallback)

If blocks aren't needed, output simple mrkdwn:

```
*üìä Daily Summary - {date}*

*üéØ Linear*
‚Ä¢ `TICKET-123` In progress - Feature work
‚Ä¢ `TICKET-456` Completed ‚úì

*üíª GitHub*
‚Ä¢ PR #42 ready for review
‚Ä¢ 8 commits across 2 repos

*‚ö†Ô∏è Blockers*
‚Ä¢ None! üéâ
```

## Posting to Slack

If `SLACK_WEBHOOK_URL` is set in environment or secrets:

```bash
# Check for webhook
if [[ -n "${SLACK_WEBHOOK_URL:-}" ]]; then
    curl -X POST -H 'Content-type: application/json' \
        --data "$payload" \
        "$SLACK_WEBHOOK_URL"
fi
```

## Arguments

- `$ARGUMENTS` can specify a channel name (for reference/header)
- Use `--post` to attempt posting if webhook is configured
- Use `--dry-run` to just output the message without posting
